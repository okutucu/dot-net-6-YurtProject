@{
    ViewData["Title"] = "Index";
}


<h3>Managment Reports</h3>


<form class="mt-2" asp-controller="ManagmentReport" asp-action="GetBySelected" method="get">

    <div class="card">
        <div class="card-body">
            <div class="row" id="paymentSection">
                <div class="col-4">
                    <input type="datetime-local" name="selectedDate" class="form-control" id="normalDate">
                    <div class="form-check">
                        <input id="normalChecked" type="radio" name="checkedPayment"
                               class="form-check-input">
                        <label for="normalChecked" class="form-check-label">Daily</label>
                    </div>
                </div>
                <div class="col-4">
                    <input id="monthly" type="month" name="selectedDate" class="form-control">
                    <div class="form-check">
                        <input id="monthlyChecked" name="checkedPayment" type="radio"
                               class="form-check-input">
                        <label for="monthlyChecked" class="form-check-label">Monthly</label>
                    </div>
                </div>
                
                <div class="col-4">
                    <input type="text" class="form-control" name="selectedDate" disabled id="yearly" placeholder="----">
                    <div class="form-check">
                        <input id="yearlyChecked" type="radio" name="checkedPayment"
                               class="form-check-input">
                        <label for="yearlyChecked" class="form-check-label">Yearly</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="form-group">
        <input type="submit" value="Submit" class="btn btn-primary" />
    </div>

</form>



@section Scripts {
    @{
        await Html.RenderPartialAsync("_MonthlyOrDailyPartial");
    }
    }

    @section ExtraCss{
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/css/datepicker.min.css" rel="stylesheet">
    }
@section ExtraScripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/js/bootstrap-datepicker.min.js"></script>
    <script>
        $("#yearly").datepicker({
            format: "yyyy",
            viewMode: "years",
            minViewMode: "years",
            autoclose: true //to close picker once year is selected
        });

        $('#normalChecked').attr('checked', true);
        $('#monthly').attr('disabled', 'disabled');
        $('#paymentSection').change((e) => {
            if (e.target.name === 'checkedPayment') {
                if ($('#monthlyChecked').is(':checked')) $('#monthly').removeAttr('disabled') && ($('#normalDate').attr('disabled', 'true') && $('#normalDate').val('')) && ($('#yearly').attr('disabled', 'true') && $('#yearly').val(''))
                if ($('#normalChecked').is(':checked')) $('#normalDate').removeAttr('disabled') && ($('#monthly').attr('disabled', 'true') && $('#monthly').val('')) && ($('#yearly').attr('disabled', 'true') && $('#yearly').val(''))
                if ($('#yearlyChecked').is(':checked')) $('#yearly').removeAttr('disabled') && ($('#monthly').attr('disabled', 'true') && $('#monthly').val('')) && ($('#normalDate').attr('disabled', 'true') && $('#normalDate').val(''))
            }
        });
    </script>
}